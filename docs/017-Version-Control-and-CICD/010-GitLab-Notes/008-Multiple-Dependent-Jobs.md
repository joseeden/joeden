---
title: "Dependent Jobs and Artifacts"
description: "Dependent Jobs and Artifacts"
tags: 
    - CICD
    - Continuous Integration
    - Continuous Delivery
    - Continuous Deployment
    - GitLab
sidebar_position: 8
---


## Overview

In GitLab CI/CD, multiple dependent jobs can be organized using `stage` and `stages`. By defining different stages, you can control the order in which jobs run and ensure that some jobs depend on the successful completion of previous ones.

For more information, please see [GitLab CI/CD YAML Syntax Reference](https://docs.gitlab.com/ee/ci/yaml/#stages)


## Pre-requisites 

- [Create a GitLab account](/docs/017-Version-Control-and-CICD/010-GitLab-Notes/001-GitLab-CICD.md#create-a-gitlab-account)
- [Create a Group](/docs/017-Version-Control-and-CICD/010-GitLab-Notes/001-GitLab-CICD.md#groups)
- [Create a Project](/docs/017-Version-Control-and-CICD/010-GitLab-Notes/001-GitLab-CICD.md#projects)
- [Create a Pipeline](/docs/017-Version-Control-and-CICD/010-GitLab-Notes/004-Pipelines.md#creating-a-pipeline)

## Modify the pipeline

Select the project > Build > Pipeline Editor. Paste the code below, add a commit message, and commit changes.

```yaml
workflow:
    name: Generate ASCII Framework 

stages:
    - build
    - test
    - deploy

build_job:
    stage: build
    before_script:
        - gem install cowsay
        - sleep 30s
    script:
        - >
            cowsay -f dragon "Run for cover!
            I am a DRAGON!" >> dragon.txt
test_job:
    stage: test
    script:
        - |
            sleep 10s
            grep -i "dragon" dragon.txt 

deploy_job:
    stage: deploy
    script:
        - cat dragon.txt 
        - echo "Deploying..."
```

Go to Pipelines and click the Job code/number. We can see that the second job failed, which then stops the entire pipeline. 

![](/img/docs/12082024-gitlab-using-multiple-dependent-jobs-failed.png)

Opening the **test** job, we can see that it failed because it cannot access the text file that was created by the first job. To fix this, we need to use artifacts.

![](/img/docs/12082024-gitlab-using-multiple-dependent-jobs-failed-why.png)

## Artifacts 

Artifacts are files generated by jobs that can be stored and shared between pipeline stages. They allow you to pass outputs, like build files or test reports, from one stage to another.

Go back to the `.gitlab-ci.yml` file and add the artifacts on the build job.

```yaml
workflow:
    name: Generate ASCII Framework 

stages:
    - build
    - test
    - deploy

build_job:
    stage: build
    before_script:
        - gem install cowsay
        - sleep 30s
    script:
        - >
            cowsay -f dragon "Run for cover!
            I am a DRAGON!" >> dragon.txt
    artifacts:
        name: artifact-text-file
        paths:
            - dragon.txt
        untracked: false 
        when: on_success 
        expire_in: 3 days            
test_job:
    stage: test
    script:
        - |
            sleep 10s
            grep -i "dragon" dragon.txt 

deploy_job:
    stage: deploy
    script:
        - cat dragon.txt 
        - echo "Deploying..."
```

The pipeline should now succeed.

![](/img/docs/12082024-gitlab-succeeeedd.png)

To access the generated artifacts, go to Build > Artifacts and click the folder icon at the right side.

![](/img/docs/12082024-gitlab-gen-artifacts.png)

To download, click Download artifacts archive.

![](/img/docs/12082024-gitlab-gen-artifacts-downlaod.png)